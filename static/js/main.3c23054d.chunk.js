(this["webpackJsonpsocial-network-app"]=this["webpackJsonpsocial-network-app"]||[]).push([[0],{109:function(t,e,n){t.exports={postsBlock:"MyPosts_postsBlock___Q1tq",addPostBlock:"MyPosts_addPostBlock__2QOxD",posts:"MyPosts_posts__P_wAg"}},124:function(t,e,n){t.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3HQ-L",wall:"ProfileInfo_wall__dGPsk",userName:"ProfileInfo_userName__2j83_"}},129:function(t,e,n){"use strict";e.a=n.p+"static/media/149071.a6143582.png"},130:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(1),s=n(12),a=n(26),c=n(2),i=function(t){return{isAuth:t.auth.isAuth}},u=function(t){return Object(a.b)(i)((function(e){return e.isAuth?Object(c.jsx)(t,Object(r.a)({},e)):Object(c.jsx)(s.a,{to:"/signin"})}))}},167:function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));var r=n(15),s=n(1),a="SEND_MESSAGE",c={chatData:[{name:"Andrey",id:1},{name:"Martin",id:2},{name:"Dasha",id:3},{name:"Martin",id:4},{name:"Natasha",id:5}],messageData:[{message:"Hi",id:1},{message:"How is your day?",id:2},{message:"What's up?",id:3}]},i=function(t){return{type:a,messageBody:t}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0,n=Object(s.a)(Object(s.a)({},t),{},{messageData:Object(r.a)(t.messageData)});switch(e.type){case a:var i={id:4,message:e.messageBody};return n.messageData.push(i),n;default:return t}}},170:function(t,e,n){"use strict";n.d(e,"e",(function(){return g})),n.d(e,"b",(function(){return y})),n.d(e,"d",(function(){return w})),n.d(e,"c",(function(){return _})),n.d(e,"f",(function(){return k}));var r=n(16),s=n.n(r),a=n(29),c=n(15),i=n(1),u=n(34),o=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(i.a)(Object(i.a)({},t),r):t}))},l="FOLLOW",d="UNFOLLOW",j="SET_USERS",b="SET_CURRENT_PAGE",p="SET_TOTAL_USERS_COUNT",f="TURN_ON_LOADER",O="DISABLE_BUTTON",h={users:[],pageSize:3,totalUsersCount:0,currentPage:1,isLoading:!1,isFollowButtonClicled:[]},x=function(t){return{type:l,userId:t}},m=function(t){return{type:d,userId:t}},g=function(t){return{type:b,currentPage:t}},v=function(t){return{type:f,isLoading:t}},y=function(t,e){return{type:O,isFollowButtonClicled:t,userId:e}},w=function(t,e){return function(){var n=Object(a.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(v(!0)),n.next=3,u.e.getUsers(t,e);case 3:a=n.sent,r(v(!1)),r((c=a.items,{type:j,users:c})),r((s=a.totalCount,{type:p,totalUsersCount:s}));case 7:case"end":return n.stop()}var s,c}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(){var t=Object(a.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(y(!0,n)),t.next=3,r(n);case 3:0===t.sent.resultCode&&e(a(n)),e(y(!1,n));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,s){return t.apply(this,arguments)}}(),_=function(t){return function(){var e=Object(a.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,u.c.followUser,x);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(t){return function(){var e=Object(a.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,u.d.unfollowUser,m);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(i.a)(Object(i.a)({},t),{},{users:o(t.users,e.userId,"id",{followed:!0})});case d:return Object(i.a)(Object(i.a)({},t),{},{users:o(t.users,e.userId,"id",{followed:!1})});case j:return Object(i.a)(Object(i.a)({},t),{},{users:e.users});case b:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.currentPage});case p:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.totalUsersCount});case f:return Object(i.a)(Object(i.a)({},t),{},{isLoading:e.isLoading});case O:return Object(i.a)(Object(i.a)({},t),{},{isFollowButtonClicled:e.isFollowButtonClicled?[].concat(Object(c.a)(t.isFollowButtonClicled),[e.userId]):t.isFollowButtonClicled.filter((function(t){return t!=e.userId}))});default:return t}}},175:function(t,e,n){t.exports={item:"Post_item__aMVlC"}},204:function(t,e,n){},205:function(t,e,n){},206:function(t,e,n){},208:function(t,e,n){},209:function(t,e,n){},235:function(t,e,n){},236:function(t,e,n){},240:function(t,e,n){t.exports={header:"Header_header__1pP2q",loginBlock:"Header_loginBlock__321R5"}},304:function(t,e,n){},34:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return o}));var r=n(174),s=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1ebea31a-d00a-46c9-9e4d-8174921ca616"}}),a={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return s.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))}},c={followUser:function(t){return s.post("follow/".concat(t),{}).then((function(t){return t.data}))}},i={unfollowUser:function(t){return s.delete("follow/".concat(t)).then((function(t){return t.data}))}},u={getAuthMeData:function(){return s.get("auth/me").then((function(t){return t.data}))},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s.post("auth/login",{email:t,password:e,rememberMe:n}).then((function(t){return t.data}))},logout:function(){return s.delete("auth/login").then((function(t){return t.data}))}},o={getProfile:function(t){return s.get("profile/".concat(t)).then((function(t){return t.data}))},getStatus:function(t){return s.get("profile/status/".concat(t)).then((function(t){return t.data}))},updateStatus:function(t){return s.put("profile/status",{status:t}).then((function(t){return t.data}))}}},342:function(t,e,n){"use strict";n.r(e);var r=n(0),s=n.n(r),a=n(32),c=n.n(a),i=(n(204),n(10)),u=n(11),o=n(13),l=n(14),d=(n.p,n(205),n(12)),j=(n(206),n(2)),b=function(t){return Object(j.jsx)("div",{children:"Music"})},p=(n(208),function(t){return Object(j.jsx)("div",{children:"Settings"})}),f=(n(209),function(t){return Object(j.jsx)("div",{children:"News"})}),O=n(1),h=n(26),x=n(16),m=n.n(x),g=n(29),v=n(15),y=n(34),w="ADD_POST",S="SET_USER_PROFILE",_="SET_STATUS",k={postData:[{post:"HI guys, have a great day!",id:1,likes:15},{post:"Morning vibes",id:2,likes:10}],profile:null,status:""},P=function(t){return{type:_,status:t}},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w:var n={id:3,post:e.postBody,likes:0},r=Object(O.a)({},t);return r.postData=Object(v.a)(t.postData),r.postData.push(n),r;case S:return Object(O.a)(Object(O.a)({},t),{},{profile:e.profile});case _:return Object(O.a)(Object(O.a)({},t),{},{status:e.status});default:return t}},A=n(109),C=n.n(A),D=n(175),N=n.n(D),B=function(t){return Object(j.jsxs)("div",{className:N.a.item,children:[Object(j.jsx)("img",{src:"https://n1s2.starhit.ru/6a/46/ae/6a46aeed947a183d67d1bc48211151bf/480x496_0_2bbde84177c9ff1c2299a26a0f69f69c@480x496_0xac120003_4430520541578509619.jpg"}),t.message,Object(j.jsx)("div",{children:Object(j.jsx)("span",{children:t.likes})})]})},E=n(44),U=s.a.memo((function(t){var e=Object(v.a)(t.postData).reverse().map((function(t){return Object(j.jsx)(B,{message:t.post,likes:t.likes},t.id)}));return Object(j.jsxs)("div",{className:C.a.postsBlock,children:[Object(j.jsx)("h3",{children:"My posts"}),Object(j.jsx)("div",{className:C.a.addPostBlock,children:Object(j.jsx)(T,{addPost:function(e){t.addPost(e)}})}),Object(j.jsx)("div",{className:C.a.posts,children:e})]})})),T=function(t){return Object(j.jsx)(E.d,{initialValues:{postBody:""},onSubmit:function(e,n){var r=n.setSubmitting;t.addPost(e.postBody),r(!1)},children:function(t){var e=t.isSubmitting;return Object(j.jsxs)(E.c,{children:[Object(j.jsx)("div",{children:Object(j.jsx)(E.b,{type:"text",name:"postBody"})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",disabled:e,children:"Add Post"})})]})}})},M=U,L=Object(h.b)((function(t){return{postData:t.profilePage.postData}}),(function(t){return{addPost:function(e){t(function(t){return{type:w,postBody:t}}(e))}}}))(M),F=(n(235),n(63)),R=n(5),z=(n(236),function(t){var e=Object(r.useState)(!1),n=Object(R.a)(e,2),s=n[0],a=n[1],c=Object(r.useState)(t.status),i=Object(R.a)(c,2),u=i[0],o=i[1];Object(r.useEffect)((function(){o(t.status)}),[t.status]);return Object(j.jsxs)("div",{children:[!s&&Object(j.jsx)("div",{children:Object(j.jsx)("span",{onDoubleClick:function(){return a(!0)},children:u||"Add status"})}),s&&Object(j.jsx)("div",{children:Object(j.jsx)("input",{onChange:function(t){o(t.currentTarget.value)},autoFocus:!0,onBlur:function(){a(!1),t.updateStatus(u)},value:u})})]})}),H=n(124),q=n.n(H),K=n(129),V=function(t){return t.profile?Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:q.a.descriptionBlock,children:[Object(j.jsx)("span",{children:Object(j.jsx)("img",{src:null!=t.profile.photos.small?t.profile.photos.small:K.a})}),Object(j.jsxs)("span",{children:[Object(j.jsx)("div",{className:q.a.userName,children:t.profile.fullName}),Object(j.jsx)(z,{status:t.status,updateStatus:t.updateStatus})]})]})}):Object(j.jsx)(F.a,{})},G=function(t){return Object(j.jsxs)("div",{children:[Object(j.jsx)(V,{profile:t.profile,status:t.status,updateStatus:t.updateStatus}),Object(j.jsx)(L,{})]})},Q=n(130),W=n(47),J=function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(t=this.props.id),this.props.getProfile(t),this.props.getUserStatus(t)}},{key:"render",value:function(){return Object(j.jsx)(G,Object(O.a)(Object(O.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),n}(s.a.Component),X=Object(W.c)(Object(h.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,id:t.auth.userId,isAuth:t.auth.isAuth}}),{getProfile:function(t){return function(){var e=Object(g.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getProfile(t);case 2:r=e.sent,n({type:S,profile:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getUserStatus:function(t){return function(){var e=Object(g.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getStatus(t);case 2:r=e.sent,n(P(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateStatus:function(t){return function(){var e=Object(g.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.updateStatus(t);case 2:1===(r=e.sent).resultCode&&n(P(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),d.f,Q.a)(J),Y="auth/SET_USER_DATA",Z={userId:null,email:null,login:null,isAuth:!1},$=function(t,e,n,r){return{type:Y,userData:{userId:t,email:e,login:n,isAuth:r}}},tt=function(){return function(){var t=Object(g.a)(m.a.mark((function t(e){var n,r,s,a,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.b.getAuthMeData();case 2:0===(n=t.sent).resultCode&&(r=n.data,s=r.id,a=r.email,c=r.login,e($(s,a,c,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Y:return Object(O.a)(Object(O.a)({},t),e.userData);default:return t}},nt=n(57),rt=(n(240),n(344)),st=n(347),at=n(348),ct=n(345),it=n(110),ut=n(349),ot=rt.a.Header,lt=function(t){return Object(j.jsx)(ot,{className:"header",children:Object(j.jsxs)(st.a,{children:[Object(j.jsx)(at.a,{span:20,children:Object(j.jsx)("div",{className:"logo"})}),Object(j.jsx)(at.a,{span:4,children:t.isAuth?Object(j.jsxs)("div",{children:[Object(j.jsx)(ct.a,{style:{backgroundColor:"#87d068"},icon:Object(j.jsx)(ut.a,{})}),t.login,Object(j.jsx)(it.a,{onClick:t.logout,children:"Logout"})]}):Object(j.jsx)(nt.c,{to:"/signin",children:"Sign in"})})]})})},dt=function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)(lt,Object(O.a)({},this.props))}}]),n}(s.a.Component),jt=Object(h.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logout:function(){return function(){var t=Object(g.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.b.logout();case 2:0===t.sent.resultCode&&e($(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(dt),bt=(n(304),n(105)),pt=n(9),ft=["label"],Ot=["children"],ht=function(t){var e=t.label,n=Object(pt.a)(t,ft),r=Object(E.e)(n),s=Object(R.a)(r,2),a=s[0],c=s[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:n.id||n.name,children:e}),Object(j.jsx)("input",Object(O.a)(Object(O.a)({className:"text-input"},a),n)),c.touched&&c.error?Object(j.jsx)("div",{className:"error",children:c.error}):null]})},xt=function(t){var e=t.children,n=Object(pt.a)(t,Ot),r=Object(E.e)(Object(O.a)(Object(O.a)({},n),{},{type:"checkbox"})),s=Object(R.a)(r,2),a=s[0],c=s[1];return Object(j.jsxs)("div",{children:[Object(j.jsxs)("label",{className:"checkbox-input",children:[Object(j.jsx)("input",Object(O.a)(Object(O.a)({type:"checkbox"},a),n)),e]}),c.touched&&c.error?Object(j.jsx)("div",{className:"error",children:c.error}):null]})},mt=bt.a().shape({email:bt.b().email().required(),password:bt.b().min(8).max(16).required()}),gt=function(t){return Object(j.jsx)(E.d,{initialValues:{email:"",password:"",rememberMe:!1},validationSchema:mt,onSubmit:function(e,n){n.setSubmitting;var r=n.setStatus;return t.login(e.email,e.password,e.rememberMe,r),!1},children:function(t){var e=t.isSubmitting,n=t.status;return Object(j.jsxs)(E.c,{children:[Object(j.jsx)(ht,{name:"email",type:"email",placeholder:"email"}),Object(j.jsx)(ht,{name:"password",type:"password",placeholder:"password"}),Object(j.jsx)(xt,{name:"rememberMe",children:"Remember me"}),Object(j.jsx)("div",{children:n}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",disabled:e,children:"Submit"})})]})}})},vt=Object(h.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n,r){return function(){var s=Object(g.a)(m.a.mark((function s(a){var c;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,y.b.login(t,e,n);case 2:0===(c=s.sent).resultCode?a(tt()):r(c.messages);case 4:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()}})((function(t){var e=t.isAuth,n=t.login;return e?Object(j.jsx)(d.a,{to:"/profile"}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Sign In"}),Object(j.jsx)(gt,{login:n})]})})),yt="SET_INITIALIZED",wt={isInitialized:!1},St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case yt:return Object(O.a)(Object(O.a)({},t),{},{isInitialized:!0});default:return t}},_t=n(167),kt=n(170),Pt=n(191),It=Object(W.b)({profilePage:I,messagesPage:_t.a,usersPage:kt.a,auth:et,app:St}),At=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.c,Ct=Object(W.d)(It,At(Object(W.a)(Pt.a))),Dt=(n(341),n(128)),Nt=n(346),Bt=n(350),Et=n(351),Ut=function(t){return function(e){return Object(j.jsx)(r.Suspense,{fallback:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})}),children:Object(j.jsx)(t,Object(O.a)({},e))})}},Tt=s.a.lazy((function(){return n.e(4).then(n.bind(null,368))})),Mt=s.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,367))})),Lt=(rt.a.Header,rt.a.Content),Ft=rt.a.Sider,Rt=function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.isInitialized?Object(j.jsxs)(rt.a,{children:[Object(j.jsx)(jt,{}),Object(j.jsxs)(rt.a,{children:[Object(j.jsx)(Ft,{width:200,className:"site-layout-background",children:Object(j.jsxs)(Dt.a,{mode:"inline",selectedKeys:[this.props.location.pathname],defaultOpenKeys:["/profile"],defaultSelectedKeys:["/profile"],style:{height:"100%",borderRight:0},children:[Object(j.jsx)(Dt.a.Item,{icon:Object(j.jsx)(ut.a,{}),children:Object(j.jsx)(nt.b,{to:"/profile",children:"Profile"})},"/profile"),Object(j.jsxs)(Dt.a.Item,{icon:Object(j.jsx)(Bt.a,{}),children:[" ",Object(j.jsx)(nt.b,{to:"/messages",children:"Messages"})]},"/messages"),Object(j.jsxs)(Dt.a.Item,{icon:Object(j.jsx)(Et.a,{}),children:[" ",Object(j.jsx)(nt.b,{to:"/users",children:"Users"})]},"/users")]})}),Object(j.jsxs)(rt.a,{style:{padding:"0 24px 24px"},children:[Object(j.jsxs)(Nt.a,{style:{margin:"16px 0"},children:[Object(j.jsx)(Nt.a.Item,{children:"Home"}),Object(j.jsx)(Nt.a.Item,{children:"List"}),Object(j.jsx)(Nt.a.Item,{children:"App"})]}),Object(j.jsxs)(Lt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(j.jsx)(d.b,{path:"/profile/:userId?",render:function(){return Object(j.jsx)(X,{})}}),Object(j.jsx)(d.b,{path:"/messages",render:Ut(Tt)}),Object(j.jsx)(d.b,{path:"/users",render:Ut(Mt)}),Object(j.jsx)(d.b,{path:"/news",render:function(){return Object(j.jsx)(f,{})}}),Object(j.jsx)(d.b,{path:"/music",render:function(){return Object(j.jsx)(b,{})}}),Object(j.jsx)(d.b,{path:"/settings",render:function(){return Object(j.jsx)(p,{})}}),Object(j.jsx)(d.b,{path:"/signin",render:function(){return Object(j.jsx)(vt,{})}})]})]})]})]}):Object(j.jsx)(F.a,{})}}]),n}(r.Component),zt=Object(W.c)(d.f,Object(h.b)((function(t){return{isInitialized:t.app.isInitialized}}),{initializeApp:function(){return function(t){t(tt()).then((function(){t({type:yt})}))}}}))(Rt),Ht=function(t){return Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(nt.a,{children:Object(j.jsx)(h.a,{store:Ct,children:Object(j.jsx)(zt,{})})})})},qt=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,365)).then((function(e){var n=e.getCLS,r=e.getFID,s=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),r(t),s(t),a(t),c(t)}))};c.a.render(Object(j.jsx)(Ht,{}),document.getElementById("root")),qt()},63:function(t,e,n){"use strict";var r=n.p+"static/media/Spinner.af27eb41.svg",s=n(2);e.a=function(t){return Object(s.jsx)("img",{src:r})}}},[[342,1,2]]]);
//# sourceMappingURL=main.3c23054d.chunk.js.map